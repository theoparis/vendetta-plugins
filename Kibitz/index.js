(function(d,n,t,E,l,r,i,b,f,x){"use strict";const o=l.createProxy([]).proxy;function N(){return E.after("dispatch",t.FluxDispatcher,function(e){n.storage.flux.logger.enabled&&o.push({time:t.moment().format("H:mm:ss.SSS"),data:e[0]})})}const _="https://cdn.discordapp.com/attachments/809852237236273174/1079892152609419336/wungus.png";f.lowlight.registerLanguage("json",x);const{StyleSheet:F,Text:m}=t.ReactNative,h=F.create({punctuation:{color:"#da70d6"},attr:{color:"#c79cea"},string:{color:"#c3e88d"},number:{color:"#f78c6c"},keyword:{color:"#7bc4e1"},default:{}}),w=function(e){return t.React.createElement(m,{style:h[e.properties.className[0]]??h.default},e.children.map(function(a){return R(a)}))},S=function(e){return t.React.createElement(m,void 0,e.value)},R=function(e){return e.type==="text"?S(e):w(e)},D=function(e){return e.children.flatMap(function(a){return R(a)})},I=function(e){return D(f.lowlight.highlight("json",e,{prefix:""}))},{FormRow:s,FormDivider:p,FormText:A}=i.Forms;function L(e){let{dispatch:a}=e;const c=JSON.stringify(a.data,null,4),g=I(c);return React.createElement(t.ReactNative.ScrollView,{style:{flex:1}},React.createElement(s,{label:a.data.type,leading:React.createElement(s.Icon,{source:r.getAssetIDByName("ic_info_24px")})}),React.createElement(p,null),React.createElement(s,{label:a.time,leading:React.createElement(s.Icon,{source:r.getAssetIDByName("ic_timer_24px")})}),React.createElement(p,null),React.createElement(i.Summary,{label:"Data",icon:"ic_channels_24px"},React.createElement(t.ReactNative.TouchableOpacity,{onLongPress:function(){t.clipboard.setString(c),b.showToast("Copied dispatch data to clipboard.",r.getAssetIDByName("toast_copy_link"))}},React.createElement(A,{style:{fontFamily:t.constants.Fonts.CODE_SEMIBOLD,fontSize:12}},g))))}const{FormRow:y}=i.Forms;function P(e){let{dispatch:a,navigation:c}=e;return React.createElement(y,{label:a.data.type,subLabel:a.time,trailing:y.Arrow,onPress:function(){return c.push("VendettaCustomPage",{title:"Dispatch",render:function(){return React.createElement(L,{dispatch:a})}})}})}const{FormDivider:B,FormText:C}=i.Forms;function $(){const e=t.NavigationNative.useNavigation();l.useProxy(o),l.useProxy(n.storage);const a=Math.random()<=.1;return o.length!==0?React.createElement(t.ReactNative.View,{style:{flex:1}},React.createElement(t.ReactNative.FlatList,{data:Object.values(o),renderItem:function(c){let{item:g}=c;return React.createElement(P,{dispatch:g,navigation:e})},ItemSeparatorComponent:B})):React.createElement(t.ReactNative.View,{style:{flex:1,justifyContent:"center",alignItems:"center"}},React.createElement(t.ReactNative.Image,{source:a?{uri:_}:r.getAssetIDByName("empty_blocked_users"),style:{width:256,height:128,resizeMode:"contain"}}),React.createElement(C,{style:{textAlign:"center"}},"There are no dispatches. Here's ",a?"Wungus":"Wumpus"," for now."))}const{FormSection:T,FormDivider:V,FormRow:u,FormSwitchRow:O}=i.Forms;function U(){const e=t.NavigationNative.useNavigation();return l.useProxy(n.storage),React.createElement(t.ReactNative.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(T,{title:"Flux",titleStyleType:"no_border"},React.createElement(O,{label:"Log all dispatches",subLabel:"Disabled by default due to performance concerns.",leading:React.createElement(u.Icon,{source:r.getAssetIDByName(n.storage.flux.logger.enabled?"ic_noise_cancellation_active":"ic_noise_cancellation_disabled")}),value:n.storage.flux.logger.enabled,onValueChange:function(a){n.storage.flux.logger.enabled=a}}),React.createElement(V,null),React.createElement(u,{label:"Open logs",leading:React.createElement(u.Icon,{source:r.getAssetIDByName("ic_rich_presence_dark_12px")}),trailing:u.Arrow,onPress:function(){return e.push("VendettaCustomPage",{title:"Dispatches",render:$})}})))}var v;(v=n.storage).flux??(v.flux={logger:{enabled:!1,ignoreList:""}});const j=[N()];function k(){j.forEach(function(e){return e()})}return d.onUnload=k,d.settings=U,d})({},vendetta.plugin,vendetta.metro.common,vendetta.patcher,vendetta.storage,vendetta.ui.assets,vendetta.ui.components,vendetta.ui.toasts,core,i$1);
