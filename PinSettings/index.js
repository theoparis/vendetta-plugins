(function(u,r,e,S,p,R,l,E,o,v){"use strict";const{FormRow:f}=l.Forms;function F(t){let{plugin:n,forceUpdate:i}=t;var a;const s=o.getSettings(n.id),c=e.NavigationNative.useNavigation();return e.React.createElement(f,{label:n.manifest.name,leading:e.React.createElement(f.Icon,{source:v.getAssetIDByName(((a=n.manifest.vendetta)===null||a===void 0?void 0:a.icon)??"ic_application_command_24px")}),trailing:f.Arrow,onPress:function(){return n.enabled?c.push("VendettaCustomPage",{title:n.manifest.name,render:s}):i()}})}const{FormSection:h,FormDivider:I}=l.Forms;function b(){E.useProxy(r.storage);const t=Object.keys(r.storage.pinnedPlugins),n=window.hasOwnProperty("enmity")||window.hasOwnProperty("Aliucord"),[,i]=e.React.useReducer(function(s){return~s},0);if(t.length===0)return null;const a=t.filter(function(s){return o.plugins[s]&&o.plugins[s].enabled}).map(function(s,c){return e.React.createElement(e.React.Fragment,null,e.React.createElement(F,{plugin:o.plugins[s],forceUpdate:i}),c!==t.length-1&&e.React.createElement(I,null))});return r.storage.appendExisting?e.React.createElement(l.ErrorBoundary,null,a):e.React.createElement(l.ErrorBoundary,null,e.React.createElement(h,{key:"PinSettingsPlugins",title:`${n?"Vendetta ":""}Plugins`},a))}const N=S.findByName("UserSettingsOverviewWrapper",!1);function x(){const t=new Array,n=p.after("default",N,function(i,a){const s=R.findInReactTree(a.props.children,function(c){return c.type&&c.type.name==="UserSettingsOverview"});t.push(p.after("render",s.type.prototype,function(c,C){let{props:{children:d}}=C;const D=[e.i18n.Messages.BILLING_SETTINGS,e.i18n.Messages.PREMIUM_SETTINGS];d=R.findInReactTree(d,function(g){return g.children[1].type===l.Forms.FormSection}).children;const P=d.findIndex(function(g){return D.includes(g?.props.label)});d.splice(P===-1?4:P,0,React.createElement(b,null))})),n()});return function(){return t.forEach(function(i){return i()})}}const{FormRow:_,FormRadioRow:$}=l.Forms;function A(t){let{name:n,id:i}=t;const a=r.storage.pinnedPlugins[i];return React.createElement($,{label:n,trailing:_.Arrow,selected:a,onPress:function(){a?delete r.storage.pinnedPlugins[i]:r.storage.pinnedPlugins[i]=!0}})}const{FormRow:B,FormSection:y,FormSwitchRow:O,FormDivider:T}=l.Forms;function U(){return E.useProxy(r.storage),e.React.createElement(e.ReactNative.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},e.React.createElement(y,{title:"Options",titleStyleType:"no_border"},e.React.createElement(O,{label:"Append to Vendetta section",subLabel:"May be incompatible with other client mods.",leading:e.React.createElement(B.Icon,{source:v.getAssetIDByName("ic_edit_24px")}),value:r.storage.appendExisting,onValueChange:function(t){r.storage.appendExisting=t}})),e.React.createElement(y,{title:"Plugins"},e.React.createElement(e.ReactNative.FlatList,{data:Object.values(o.plugins).filter(function(t){return o.getSettings(t.id)}),ItemSeparatorComponent:T,renderItem:function(t){let{item:n}=t;return e.React.createElement(A,{name:n.manifest.name,id:n.id})}})))}var w,m;(w=r.storage).pinnedPlugins??(w.pinnedPlugins={}),(m=r.storage).appendExisting??(m.appendExisting=!1);const M=[x()],V=function(){return M.forEach(function(t){return t()})};return u.onUnload=V,u.settings=U,u})({},vendetta.plugin,vendetta.metro.common,vendetta.metro,vendetta.patcher,vendetta.utils,vendetta.ui.components,vendetta.storage,vendetta.plugins,vendetta.ui.assets);
