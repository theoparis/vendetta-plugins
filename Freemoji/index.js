(function(a,t,n,r,c,S,g){"use strict";const d=n.findByProps("canUseEmojisEverywhere");var E=[r.instead("canUseEmojisEverywhere",d,function(){return!0}),r.instead("canUseAnimatedEmojis",d,function(){return!0})];const{getCustomEmojiById:v}=n.findByStoreName("EmojiStore"),{getGuildId:y}=n.findByStoreName("SelectedGuildStore"),z=/<a?:(\w+):(\d+)>/i;function w(e,i){const o=e.matchAll(/<a?:(\w+):(\d+)>/gi),f=[];for(const j of o){const s=v(j[2]);(s.guildId!=y()||s.animated)&&(e=e.replace(j[0],""),f.push(`${s.url.split("?")[0]}?size=${i}`))}return{newContent:e.trim(),extractedEmojis:f}}function m(e){if(!e.content.match(z))return;const{newContent:i,extractedEmojis:o}=w(e.content,t.storage.emojiSize);e.content=i,o.length>0&&(e.content+=`
`+o.join(`
`)),e.invalidEmojis=[]}const b=n.findByProps("sendMessage","receiveMessage"),h=n.findByProps("uploadLocalFiles");var R=[r.before("sendMessage",b,function(e){return m(e[1])}),r.before("uploadLocalFiles",h,function(e){return m(e[0].parsedMessage)})];const{FormSection:l,FormRadioRow:B}=S.Forms,$={Tiny:16,Small:32,Medium:48,Large:64,Huge:96,Jumbo:128},p="https://cdn.discordapp.com/emojis/926602689213767680.webp";function P(){return g.useProxy(t.storage),React.createElement(c.ReactNative.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(l,{title:"Emoji Size",titleStyleType:"no_border"},Object.entries($).map(function(e){let[i,o]=e;return React.createElement(B,{label:i,subLabel:o,selected:t.storage.emojiSize===o,onPress:function(){t.storage.emojiSize=o}})})),React.createElement(l,{title:"Preview"},React.createElement(c.ReactNative.Image,{source:{uri:`${p}?size=${t.storage.emojiSize}`,width:t.storage.emojiSize,height:t.storage.emojiSize}})))}var u;(u=t.storage).emojiSize??(u.emojiSize=48),typeof t.storage.emojiSize=="string"&&(t.storage.emojiSize=parseInt(t.storage.emojiSize));const F=[...E,...R],I=function(){return F.forEach(function(e){return e()})};return a.onUnload=I,a.settings=P,a})({},vendetta.plugin,vendetta.metro,vendetta.patcher,vendetta.metro.common,vendetta.ui.components,vendetta.storage);
